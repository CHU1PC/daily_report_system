# DayLog

作業時間を記録し、日報を自動生成するチーム向けアプリケーション

DayLogは、日々の作業時間を簡単に記録し、チーム全体の作業状況を可視化するWebアプリケーションです。Linear連携により、Issueの自動同期も可能で、エンジニアチームやビジネスチームの生産性向上をサポートします。

---

## 主な機能

### 📊 作業時間の記録と管理

- ワンクリックタイマー: タスクを選択してスタートボタンを押すだけで、作業時間の記録を開始
- 自動日報生成: 記録した作業時間から、自動的に日報を生成
- Google Sheets連携: 作業記録を自動的にGoogle Sheetsに出力し、管理や集計が簡単

### 📅 視覚的なカレンダービュー

- 週間カレンダー: 1週間の作業時間を一目で確認
- タスク別色分け: タスクごとに色分けされ、作業の内訳が分かりやすい
- 日別・週別切り替え: 日ごと、週ごとの表示を自由に切り替え

### 🔗 Linear連携

- Issue自動同期: LinearのIssueを自動的にタスクとして取り込み
- リアルタイム更新: Webhook連携により、Issueの変更がリアルタイムで反映
- チーム・プロジェクト管理: Linear上のチームやプロジェクト構造をそのまま利用

### 👥 チーム作業の可視化

- チーム別表示: チームごとの作業時間や進捗を確認
- メンバー管理: 管理者による承認制で、セキュアなチーム運用
- 作業時間の共有: チーム全体の作業状況を共有し、コラボレーションを促進

---

## 使い方

### 1. ログイン

![ログイン画面](docs/img/login_screen.png)

1. 

### 2. タスクの作成と時間記録

#### タスクを作成する

1. メイン画面の「新しいタスク」ボタンをクリック
2. タスク名と色を設定
3. 保存ボタンをクリック

> **Tip**: Linear連携を有効にすると、LinearのIssueが自動的にタスクとして追加されます

#### 作業時間を記録する

1. 記録したいタスクを選択
2. 「開始」ボタンをクリック
3. 作業が終わったら「停止」ボタンをクリック
4. コメントを追加して保存

![メイン画面のスクリーンショット](docs/screenshots/main-screen.png)
<!-- スクリーンショットは後で追加してください -->

### 3. 作業時間の確認

#### カレンダービューで確認

- 週間カレンダーで1週間の作業時間を確認
- タスクをクリックすると詳細情報を表示
- 時間帯ごとの作業内容が一目で分かります

![カレンダービュー](docs/screenshots/calendar-view.png)
<!-- スクリーンショットは後で追加してください -->

#### チーム別の作業時間

- 「ユーザーTeam表示」タブでチーム全体の作業状況を確認
- メンバーごとの作業時間や進捗を把握
- プロジェクトの進行状況を可視化

![チーム表示](docs/screenshots/team-view.png)
<!-- スクリーンショットは後で追加してください -->

### 4. コメントの追加

作業を停止するときに、以下のような情報をコメントとして記録できます：

- 実施した作業内容
- 進捗状況
- 課題や気づき
- 次回のタスク

コメントは日報作成時に自動的に反映されます。

### 5. Google Sheetsでの管理

記録された作業時間は、自動的にGoogle Sheetsに出力されます：

- 日付、タスク名、開始時刻、終了時刻、作業時間、コメント
- スプレッドシートで集計や分析が可能
- 他のツールとの連携も簡単

---

## Linear連携について

### Linearとは？

Linearは、エンジニアチーム向けのプロジェクト管理・Issue管理ツールです。

### DayLogとの連携でできること

- Issue自動同期: LinearのIssueがDayLogのタスクとして自動追加
- リアルタイム更新: Issueのステータス変更がリアルタイムで反映
- チーム・プロジェクト構造: Linearのチーム・プロジェクト構造をそのまま利用
- 担当者の自動設定: Issueの担当者が自動的にタスクに割り当て

### Linear連携の使い方

Linear連携が設定されている場合、以下のように自動的に動作します：

1. LinearでIssueを作成 → DayLogに自動的にタスクとして追加
2. Issueのステータス変更 → DayLogのタスクも自動更新
3. Issueの担当者変更 → DayLogのタスク担当者も自動更新

> **Note**: Linear連携の設定は管理者が行います。設定方法については管理者にお問い合わせください。

---

## 管理者向け情報

### ユーザー管理

#### 新規ユーザーの承認

1. 管理画面（`/admin`）にアクセス
2. 「承認待ちユーザー」タブで新規登録ユーザーを確認
3. 「ユーザーとして承認」または「管理者として承認」をクリック

#### ユーザーの削除

- 「承認済みユーザー」タブから不要なユーザーを削除可能
- 削除すると、データベースおよびSupabase Authからユーザーが削除されます
- 時間エントリやタスクは保持されます

![管理画面](docs/screenshots/admin-panel.png)
<!-- スクリーンショットは後で追加してください -->

### Linear連携の設定

#### 必要な設定

- Linear APIキー
- Webhook Secret（複数のチームがある場合は複数設定可能）

#### Issue同期スクリプト

最新のIssueを同期するには、以下のコマンドを実行します：

```bash
npm run sync:linear
```

- 最新200件のIssueを取得
- 既に同期済みのIssueはスキップ
- Rate limitに達した場合は自動的に停止

### Google Sheets連携の設定

1. Google Cloud Consoleでサービスアカウントを作成
2. サービスアカウントのJSONキーをダウンロード
3. 環境変数に設定（`.env.local`）
4. スプレッドシートにサービスアカウントのメールアドレスを編集権限付きで共有

詳細は`.env.local.example`を参照してください。

---

## よくある質問

### Q. タスクが自動的に停止されることはありますか？

A. 日付が変わると、自動的に23:59:59で停止され、新しい日の00:00:00から新しいエントリが作成されます。

### Q. 過去の作業時間を編集できますか？

A. カレンダービューから過去のエントリをクリックして、時間やコメントを編集できます。

### Q. Linear連携は必須ですか？

A. いいえ、Linear連携なしでも作業時間の記録は可能です。手動でタスクを作成して使用できます。

### Q. Google Sheetsに出力される内容をカスタマイズできますか？

A. 現在はフォーマットが固定されていますが、スプレッドシート上で自由に加工できます。

### Q. チーム表示が見れません

A. チーム表示はメイン画面からのみ閲覧可能です。管理画面からは表示されません。

---

## サポート・お問い合わせ

- **Issues**: [GitHub Issues](https://github.com/CHU1PC/daily_report_system/issues)
- **質問・要望**: Issueを作成してください

---

## ライセンス

このプロジェクトはプライベートリポジトリです。

---

## 更新履歴

### 最新版

- ユーザーTeam表示機能（メイン画面のみ）
- Linear Issue同期スクリプト
- 複数Webhook対応
- 管理画面でのユーザー削除機能（認証拒否対応）
- 日を跨ぐタスクのスプレッドシート自動同期
- カレンダー表示の修正（タイムゾーン対応）
